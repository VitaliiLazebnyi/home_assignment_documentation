<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Gilded+Rose+Refactoring+Kata">Gilded Rose Refactoring Kata</h1>

<p>This project is a Ruby console application that implements a solution for the classic Gilded Rose Refactoring Kata. The primary task is to refactor an existing inventory management system for the Gilded Rose. The goal is to enhance the code’s design and clarity while introducing a new feature: handling “Conjured” items, which degrade in quality twice as fast as regular items.</p>

<h2 id="label-Table+of+Contents">Table of Contents</h2>
<ul><li>
<p><a href="#getting-started">Getting Started</a></p>
<ul><li>
<p><a href="#prerequisites">Prerequisites</a></p>
</li><li>
<p><a href="#installation">Installation</a></p>
</li></ul>
</li><li>
<p><a href="#usage">Usage</a></p>
<ul><li>
<p><a href="#running-tests">Running Tests</a></p>
</li><li>
<p><a href="#code-quality-checks">Code Quality Checks</a></p>
</li><li>
<p><a href="#generating-documentation">Generating Documentation</a></p>
</li><li>
<p><a href="#example-usage">Example Usage</a></p>
</li></ul>
</li><li>
<p><a href="#design-overview">Design Overview</a></p>
</li><li>
<p><a href="#requirements-decision-table">Requirements Decision Table</a></p>
</li><li>
<p><a href="#testing-approach">Testing Approach</a></p>
</li><li>
<p><a href="#future-considerations">Future Considerations</a></p>
</li><li>
<p><a href="#project-structure">Project Structure</a></p>
</li></ul>
<hr>

<h2 id="label-Getting+Started">Getting Started</h2>

<p>Follow these instructions to get a copy of the project up and running on your local machine for development and testing purposes.</p>

<h3 id="label-Prerequisites">Prerequisites</h3>

<p>Before you begin, ensure you have the following installed on your system:</p>
<ul><li>
<p><strong>Ruby:</strong> The project requires a specific version of Ruby, which is defined in the <code>.ruby-version</code> and <code>mise.toml</code> files. We recommend using href="https://mise.jdx.dev/"></a> as a version manager, as this project is pre-configured to work with it. For detailed installation instructions for Ruby and other setup steps, you can follow the official on Rails Installation Guide</strong><a href="https://guides.rubyonrails.org/install_ruby_on_rails.html"></a>.</p>
</li><li>
<p><strong>Bundler:</strong> This project uses Bundler to manage its gem dependencies. <code>bash  gem install bundler </code></p>
</li></ul>

<h3 id="label-Installation">Installation</h3>
<ol><li>
<p><strong>Clone the repository:</strong> <code>bash   git clone git@github.com:komoju-interviews-related/backend-lazebnyi-vitalii.git   cd backend-lazebnyi-vitalii </code></p>
</li><li>
<p><strong>Install dependencies:</strong> Use Bundler to install all the required gems listed in the <code>Gemfile</code>. <code>bash   bundle install </code></p>
</li></ol>
<hr>

<h2 id="label-Usage">Usage</h2>

<p>This section outlines the typical commands you’ll use during development.</p>

<h3 id="label-Running+Tests">Running Tests</h3>

<p>This project uses <strong>RSpec</strong> for testing. To execute the entire test suite, run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rspec'>rspec</span>
</code></pre>

<p>After running the tests, a code coverage report will be generated by SimpleCov in the <code>coverage/</code> directory. You can open <code>coverage/index.html</code> in your browser to view the detailed report.</p>

<h3 id="label-Code+Quality+Checks">Code Quality Checks</h3>

<p>We use <strong>RuboCop</strong> as a linter and code formatter to maintain a consistent code style. To check for any offenses, run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rubocop'>rubocop</span>
</code></pre>

<p>Many offenses can be automatically corrected by running <code>bundle exec rubocop -A</code>.</p>

<h3 id="label-Generating+Documentation">Generating Documentation</h3>

<p>We use <strong>YARD</strong> to generate documentation from the source code comments. To create the documentation, run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_yard'>yard</span>
</code></pre>

<p>The output will be saved in the <code>doc/</code> directory. You can view <code>doc/index.html</code> in a web browser.</p>

<h3 id="label-Example+Usage">Example Usage</h3>

<p>To see the item update logic in action, you can create a simple Ruby script (e.g., <code>runner.rb</code>) in the project’s root directory and run it.</p>

<p><strong><code>runner.rb</code></strong></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># frozen_string_literal: true
</span>
<span class='comment'># Load the application environment via the boot file
</span><span class='id identifier rubyid_require_relative'>require_relative</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config/boot</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--- Gilded Rose Inventory Management ---</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_items'>items</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='const'><span class='object_link'><a href="Item.html" title="Item (class)">Item</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Item.html#initialize-instance_method" title="Item#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+5 Dexterity Vest</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>20</span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='const'><span class='object_link'><a href="Item.html" title="Item (class)">Item</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Item.html#initialize-instance_method" title="Item#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Aged Brie</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span><span class='comma'>,</span>
  <span class='const'><span class='object_link'><a href="Item.html" title="Item (class)">Item</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Item.html#initialize-instance_method" title="Item#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Conjured Mana Cake</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>6</span><span class='rparen'>)</span>
<span class='rbracket'>]</span>

<span class='id identifier rubyid_gilded_rose'>gilded_rose</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="GildedRose.html" title="GildedRose (class)">GildedRose</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GildedRose.html#initialize-instance_method" title="GildedRose#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nDay 1:</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_item'>item</span> <span class='rbrace'>}</span>

<span class='id identifier rubyid_gilded_rose'>gilded_rose</span><span class='period'>.</span><span class='id identifier rubyid_update_quality'>update_quality</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nDay 2:</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_item'>item</span> <span class='rbrace'>}</span>
</code></pre>

<p><strong>Run the script:</strong></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='id identifier rubyid_runner'>runner</span><span class='period'>.</span><span class='id identifier rubyid_rb'>rb</span>
</code></pre>
<hr>

<h2 id="label-Design+Overview">Design Overview</h2>

<p>This solution refactors the original, conditionally heavy logic into a more maintainable and extensible architecture by utilizing a combination of the <strong>Strategy</strong> and <strong>Factory</strong> design patterns.</p>
<ul><li>
<p><strong>Strategy Pattern:</strong> The core of the design is the Strategy pattern. Each distinct item type with unique update logic (e.g., “Aged Brie”, “Sulfuras”) is encapsulated in its own “updater” class. These classes all inherit from a common <code>ItemUpdater</code> base class, which defines the standard interface (<code>#update</code>) and default behavior. This approach adheres to the Open/Closed Principle, as new item types can be added simply by creating a new updater class without modifying the existing code.</p>
</li><li>
<p><strong>Factory Pattern:</strong> The <code>ItemUpdaterFactory</code> is responsible for selecting the appropriate updater (strategy) for a given item at runtime. It inspects the item’s name to determine which updater class to instantiate. This decouples the main <code>GildedRose</code> class from the concrete updater implementations, meaning <code>GildedRose</code> doesn’t need to know about the specific updater classes.</p>
</li><li>
<p><strong>“Conjured” Items as a Modifier:</strong> The “Conjured” property is treated as a modifier. After the factory selects the base strategy, it checks if the item is “Conjured” and, if so, applies a <code>conjured!</code> flag to the updater instance. This flag is then used within the strategy to double the rate of quality change, providing a flexible way to modify behavior without creating a separate class for every possible combination (e.g., “Conjured Aged Brie”).</p>
</li></ul>

<p>This design results in a system that is clean, modular, and easy to extend.</p>

<h3 id="label-Architecture+Diagram">Architecture Diagram</h3>

<pre class="code ruby"><code class="ruby">+---------------------------+       +--------------------------------+
|        GildedRose         |------&gt;|      ItemUpdaterFactory        |
|---------------------------|   1.  |--------------------------------|
| #update_quality(items)    |       | .for(item) -&gt; returns Updater  |
+-------------+-------------+       +---------------------+----------+
              |                                           | 2.
              | 3. calls .update() on                     |
              |    the returned updater                   |
              |                                           |
              v                                           v
+-------------+-------------------------------------------+-------------+
|                                                                       |
|                     +-----------------+                               |
|                     |   ItemUpdater   | (Base Strategy)               |
|                     |-----------------|                               |
|                     | #update         |                               |
|                     +-------+---------+                               |
|                             ^                                         |
|                             | (inherits from)                         |
|           +-----------------+--------------------+----------------+   |
|           |                 |                    |                |   |
| +---------+-------+ +-------+----------+ +-------+--------+ +-----+---+-----+
| | AgedBrieUpdater | | BackstagePass... | | SulfurasUpdater| | ... (default) |
| +-----------------+ +------------------+ +----------------+ +---------------+
|                                                                       |
+-----------------------------------------------------------------------+
                            (Concrete Strategies)
</code></pre>
<hr>

<h2 id="label-Requirements+Decision+Table">Requirements Decision Table</h2>

<p>The core logic for updating item quality is based on the following rules, which were derived from the requirements specification.</p>

<table role="table">
<thead>
<tr>
<th align="left">Item Category</th>
<th align="left">Is Conjured?</th>
<th align="left">Condition (SellIn)</th>
<th align="left">Daily Quality Change</th>
<th align="left">Daily SellIn Change</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">**Standard Item**</td>
<td align="left">No</td>
<td align="left">SellIn &gt; 0</td>
<td align="left">-1</td>
<td align="left">-1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">SellIn &lt;= 0</td>
<td align="left">-2</td>
<td align="left">-1</td>
<td align="left">Quality degrades twice as fast past sell date.</td>
</tr>
<tr>
<td align="left">**Standard Item**</td>
<td align="left">Yes</td>
<td align="left">SellIn &gt; 0</td>
<td align="left">-2</td>
<td align="left">-1</td>
<td align="left">The degradation rate is doubled.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">SellIn &lt;= 0</td>
<td align="left">-4</td>
<td align="left">-1</td>
<td align="left">The degradation rate is doubled.</td>
</tr>
<tr>
<td align="left">**Aged Brie**</td>
<td align="left">No</td>
<td align="left">Any</td>
<td align="left">+1</td>
<td align="left">-1</td>
<td align="left">Quality increases over time.</td>
</tr>
<tr>
<td align="left">**Aged Brie**</td>
<td align="left">Yes</td>
<td align="left">Any</td>
<td align="left">+2</td>
<td align="left">-1</td>
<td align="left">The quality increase rate is doubled.</td>
</tr>
<tr>
<td align="left">**Backstage pass**</td>
<td align="left">No</td>
<td align="left">SellIn &gt; 10</td>
<td align="left">+1</td>
<td align="left">-1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">10 &gt;= SellIn &gt; 5</td>
<td align="left">+2</td>
<td align="left">-1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">5 &gt;= SellIn &gt; 0</td>
<td align="left">+3</td>
<td align="left">-1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">SellIn &lt;= 0</td>
<td align="left">Becomes 0</td>
<td align="left">-1</td>
<td align="left">Quality drops to 0 after the concert.</td>
</tr>
<tr>
<td align="left">**Backstage pass**</td>
<td align="left">Yes</td>
<td align="left">SellIn &gt; 10</td>
<td align="left">+2</td>
<td align="left">-1</td>
<td align="left">The quality increase rate is doubled.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">10 &gt;= SellIn &gt; 5</td>
<td align="left">+4</td>
<td align="left">-1</td>
<td align="left">The quality increase rate is doubled.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">5 &gt;= SellIn &gt; 0</td>
<td align="left">+6</td>
<td align="left">-1</td>
<td align="left">The quality increase rate is doubled.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">SellIn &lt;= 0</td>
<td align="left">Becomes 0</td>
<td align="left">-1</td>
<td align="left">Drops to 0; this rule is absolute.</td>
</tr>
<tr>
<td align="left"><strong>Sulfuras</strong></td>
<td align="left">No/Yes</td>
<td align="left">Any</td>
<td align="left">0 (Quality is always 80)</td>
<td align="left">0</td>
<td align="left">Legendary item; its properties never change.</td>
</tr>
</tbody>
</table>
<hr>

<h2 id="label-Testing+Approach">Testing Approach</h2>

<p>The test suite is built using <strong>RSpec</strong>, a popular behavior-driven development (BDD) framework for the Ruby programming language. The approach focuses on ensuring that each component of the system behaves correctly and that the overall logic meets all conditions outlined in the decision table above.</p>
<ul><li>
<p><strong>Behavior-Driven Specs:</strong> Each <code>_spec.rb</code> file describes the expected behavior of a class. The <code>gilded_rose_spec.rb</code> file is structured to test every rule for each item category, including the “Conjured” variations, providing comprehensive coverage of the requirements.</p>
</li><li>
<p><strong>DRY Tests with Shared Examples:</strong> To avoid repetition, the common logic for standard items is defined in <code>spec/support/shared_examples/standard_item_examples.rb</code>. This shared example is then used to test both normal and “Conjured” standard items, ensuring consistency and making the test suite more maintainable.</p>
</li><li>
<p><strong>Code Coverage:</strong> The project is configured with SimpleCov to generate a code coverage report after each test run. This helps identify parts of the codebase that are not covered by tests, providing confidence in the solution’s reliability.</p>
</li></ul>

<p>This approach ensures the reliability of the refactored code and provides a safety net for any future changes.</p>
<hr>

<h2 id="label-Future+Considerations">Future Considerations</h2>

<p>While the current solution is robust and meets all requirements, the following points could be considered for future enhancements:</p>
<ul><li>
<p><strong>Item Type Identification:</strong> The <code>ItemUpdaterFactory</code> currently relies on string matching (<code>name.downcase.include?(keyword)</code>) to determine an item’s type. This approach is practical but could be brittle. If a new item were named “Briefcase”, it might be incorrectly identified as “Aged Brie”. If the <code>Item</code> class could be modified, adding a dedicated <code>category</code> attribute would provide a more reliable mechanism for type checking.</p>
</li></ul>
<hr>

<h2 id="label-Project+Structure">Project Structure</h2>

<p>Here is a detailed overview of the key files and directories in this project:</p>

<p>“‘ .├── app/ # Contains the core application logic.│ ├── updaters/ # Houses specific logic for updating different item types (Strategy Pattern).│ │ ├── aged_brie_updater.rb # Handles “Aged Brie”, which increases in quality over time.│ │ ├── backstage_pass_updater.rb # Handles “Backstage passes”, whose quality changes as a concert approaches.│ │ ├── item_updater.rb # Base class for standard items and default “Conjured” logic.│ │ ├── item_updater_factory.rb # Selects the correct updater strategy for a given item.│ │ └── sulfuras_updater.rb # Handles “Sulfuras”, which is a legendary item and never changes.│ ├── gilded_rose.rb # Main class to update inventory quality.│ └── item.rb # The base Item class (as provided).├── config/ # Application configuration and setup.│ └── boot.rb # Handles gem loading and application file requires.├── coverage/ # Generated SimpleCov test coverage reports (HTML format).├── doc/ # Generated YARD documentation (HTML format).├── spec/ # Contains all RSpec tests (specs).│ ├── support/ # Contains helpers and shared configuration for tests.│ │ └── shared_examples/ # Reusable test examples for different item types.│ │ └── standard_item_examples.rb│ ├── gilded_rose_spec.rb # Tests for the main GildedRose class.│ ├── item_spec.rb # Tests for the base Item class.│ └── spec_helper.rb # RSpec helper configuration.├── .yardoc/ # Cache directory for YARD. Speeds up documentation generation.├── .gitignore # Specifies files and directories to be ignored by Git.├── .rspec # Configuration file for the RSpec test framework.├── .rubocop.yml # Configuration file for the RuboCop linter.├── .ruby-version # Defines the required Ruby version for the project.├── Gemfile # Lists all the gem dependencies for the project.├── Gemfile.lock # Records the exact versions of the gems that were installed.├── mise.toml # Configuration for the Mise version manager.└── README.md # This file.</p>
</div></div>

      <div id="footer">
  Generated on Mon Jun 16 21:45:22 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.4).
</div>

    </div>
  </body>
</html>